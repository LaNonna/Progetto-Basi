drop table if exists Dipendente;
drop table if exists Farmacista;
drop table if exists Magazziniere;
drop table if exists Impiegato;
drop table if exists Sede;
drop table if exists Magazzino;
drop table if exists Prodotto;
drop table if exists Farmaco;
drop table if exists Ricevuta;
drop table if exists TransazioneUscente;
drop table if exists Ricetta;
drop table if exists Lotto;
drop table if exists Fornitore;
drop table if exists OperazioneSuMagazzino;
drop table if exists Contenimento;
drop table if exists ComposizioneRicevuta;


/*********************************************************************************************/

/*					CREAZIONE DOMINIO					*/

/*********************************************************************************************/
/*drop domain if exists fascia;

create domain fascia 
as varchar(4) default 'C' 
check(value=='A' or value=='C' or value=='Cbis') /*	mancano un botto di fasce	*/*/

/*********************************************************************************************/

/*					ENTITA PRINCIPALI					*/

/*********************************************************************************************/

create table Dipendente(
	CF			character(16)	primary key,
	email			varchar(100)	unique	not null				check (email like '%_@__%.__%'),
	data_nascita 		date 			not null,
	nome 			varchar(20) 		not null,
	cognome 		varchar(20) 		not null,
	sex 			varchar(1) 	check(sex = 'M' or sex ='F' or sex ='A')	default 'A',
	citta 			varchar(20) 		not null,
	via 			varchar(50) 		not null,
	civico 		varchar(5) 		not null,
	CAP 			char(5)								default null,
	stato 			varchar(3) 		not null				default 'IT',
	stipendio_mensile	numeric(9,2) 		not null				default 0,
	telefono 		varchar(13),

	data_assunzione 	date			not null				default current_date,
	data_licenziamento	date								default null,
	direttore_assunzione	character(16),
	data_inizio	 	date			not null				default current_date,
	data_fine		date								default null,
	sede			int			not null

	/*foreign key(dirigente_assunzione) references Impiegato(CF_impiegato)	on update cascade on delete cascade,*/
	/*foreign key(sede) references Sede(id_sede)				on update cascade on delete cascade*/
);

create table Farmacista(
	CF_farmacista 		char(16)	primary key,
	
	foreign key(CF_farmacista) references Dipendente(CF) 		on update cascade on delete cascade

);

create table Magazziniere(
	CF_magazziniere 	char(16) 	primary key,
	
	foreign key(CF_magazziniere) references Dipendente(CF)			on update cascade on delete cascade

);

create table Impiegato(
	CF_impiegato 		char(16) 	primary key,
	is_direttore 		boolean		not null					default false,
	
	foreign key(CF_impiegato) references Dipendente(CF)			on update cascade on delete cascade

);



create table Sede(
	id_sede 		serial 		primary key,
	telefono 		char(13),
	citta 			varchar(20) 		not null,
	via 			varchar(20) 		not null,
	civico 		varchar(5) 		not null,
	CAP 			char(5) 		not null,
	stato 			varchar(3) 		not null 					default 'IT',
	
	direttore		char(16)		not null
	
	/*foreign key(direttore) references Impiegato(CF_impiegato)		on update cascade on delete cascade*/

);



create table Magazzino(
	id_magazzino 		serial 	primary key,
	
	foreign key(id_magazzino) references Sede(id_sede)			on update cascade on delete cascade

);


create table Prodotto(
	codice_prodotto 	varchar(10),
	nome 			varchar(16) 		not null,
	produttore 		varchar(20) 		not null 					default 'Laboratorio Escobar',
	prezzo_unitario 	numeric(5,2) 		not null,
	data_scadenza		date			,

	primary key(codice_prodotto)
);

create table Farmaco(
	codice_prodotto 	varchar(16) 	primary key,
	p_attivo 		varchar(15),
	p_fascia 		/*fascia*/varchar(5),
	r_necessaria 		varchar(5),
	
	foreign key(codice_prodotto) references Prodotto(codice_prodotto)

);

create table Ricevuta(
	n_ricevuta 			serial 	primary key,
	timestamp_r 			timestamp 		not null 					default current_timestamp,
	importo			numeric(9,2)		not null,
	sede				int			not null,
	farmacista 			char(16),
	
	foreign key(sede) references Sede(id_sede) on update cascade on delete cascade,
	foreign key(farmacista) references Farmacista(CF_farmacista)
);

create table TransazioneUscente(
	n_transazione 		serial  	primary key,
	timestamp_t 		timestamp 		not null 					default current_timestamp,
	importo 		numeric(9,2) 		not null 					default 0,
	
	d_autorizzante		character(16)		not null,
	dipendente		character(16)		not null,

	foreign key(d_autorizzante) references Impiegato(CF_impiegato)	on update cascade on delete restrict,
	foreign key(dipendente) references Dipendente(CF)			on update cascade on delete restrict
);

create table Ricetta(
	n_ricetta 		char(16)		primary key,
	tipo 			varchar(10) 	/*check() 	*/					default 'mah',
	data_emissione 	date 									default null,
	CF_medico 		char(16)		not null,
	CF_paziente 		char(16) 		not null

);

create table Lotto(
	n_lotto 		char(16)	primary key,
	n_pezzi		smallint	not null 	default 1,
	
	fornitore		char(11)	

);

create table Fornitore(
	p_iva 			char(11) 	primary key,
	c_c 			char(27) 	unique 	not null,
	pec 			varchar(100) 	unique 	not null	check (pec like '%_@__%.__%'),
	telefono 		varchar(13),
	citta 			varchar(50) 			not null,
	via 			varchar(50) 			not null,
	civico 			varchar(5) 			not null,
	CAP 			char(5) 			not null,
	stato 			varchar(3) 			not null 				default 'IT'

);

create table OperazioneSuMagazzino(
	magazziniere 		char(16) 			not null,
	lotto 			char(16)			not null,
	magazzino 		int,
	data_op 		date 				not null 				default current_date, 
	tipo			varchar(7)			not null default'carico',
	
	primary key(magazziniere,lotto,magazzino),
	
	foreign key(magazziniere) references Magazziniere(CF_magazziniere)		on update cascade on delete cascade,
	foreign key(lotto) references Lotto(n_lotto)			on update cascade on delete cascade,
	foreign key(magazzino) references Magazzino(id_magazzino)			on update cascade on delete cascade

);

/*********************************************************************************************/

/*					RELATIONSHIPS						*/

/*********************************************************************************************/

/*Magazzino <-> Prodotto*/
create table Contenimento(
	magazzino		int,
	prodotto 		varchar(16),
	quantita 		smallint	not null	default 1,
	
	primary key(magazzino,prodotto),
	
	foreign key(magazzino) references Magazzino(id_magazzino)			on update cascade on delete cascade,
	foreign key(prodotto) references Prodotto(codice_prodotto)			on update cascade on delete cascade

);


/*Farmaco <-> Ricetta*/
create  table Prescrizione(
	farmaco 		varchar(16),
	ricetta 		char(16),
	quantita 		numeric(2)  	not null 		default 1,
	
	primary key(farmaco,ricetta),
	
	foreign key(farmaco) references Farmaco(codice_prodotto)			on update cascade on delete cascade,
	foreign key(ricetta) references Ricetta(n_ricetta)				on update cascade on delete cascade

);




/*Ricevuta <-> Prodotto*/
create table ComposizioneRicevuta(
	prodotto 		varchar(16),
	ricevuta 		int,
	quantita 		smallint	not null	default 1,
	
	primary key(prodotto,ricevuta),
	
	foreign key(prodotto) references Prodotto(codice_prodotto)			on update cascade on delete restrict,   /*mantenimento storico ricevute*/
	foreign key(ricevuta) references Ricevuta(n_ricevuta)			on update cascade on delete restrict

);



/*********************************************************************************************/

/*					INSERIMENTO VALORI					*/

/*********************************************************************************************/


insert into Dipendente(CF,email,data_nascita,nome,cognome,sex,citta,via,civico,CAP,stato,stipendio_mensile,direttore_assunzione,data_assunzione,data_licenziamento,sede,data_inizio,data_fine) values
('MTCMTT98R16G224G','matteoumatche@gmail.com','1990-01-01','Matteo','Umatche','M','Cartura','A.Vivaldi','5','35025','IT',5000,null,'2001-01-01',null,'1','2001-01-01',null),/*direttore pd*/
('ZNZDZN42S10E071F','costanzino@gmail.com','1990-01-01','costanzo','vecchio','M','Padova','Roma','2B','35020','IT',2000,'MTCMTT98R16G224G','2002-01-01',null,'1','2002-01-01',null),/*farmacista pd*/
('ZTPCNY52H51E639P','franceschella@gmail.com','1990-01-01','francesca','petrella','F','Albignasego','Guizza','441','35021','IT',1700,'MTCMTT98R16G224G','2002-01-01',null,'1','2002-01-01',null),/*magazziniere pd*/
('HNTHRZ65S62E048Z','paolo.rosso@gmail.com','1990-01-01','paolo','rossi','M','Roma','verdi','4','10452','IT',2500,'LKNHDD37T45C082I','2004-01-01',null,'2','2004-01-01',null),/*farmacista ro*/
('CXFCRD88P59B285H','massimo.pericolo@gmail.com','1990-01-01','massimo','pericolo','M','Milano', 'navigli','1A','96857','IT',2000,'MTCMTT98R16G224G','2004-01-01',null,'5','2004-01-01',null),/*impiegato mi*/
('FCTNBT60A66E625C','mammamia@gmail.com','1990-01-01','madre','addolorata','F','Bari','S.Antono','44','52526','IT',4500,null,'2001-01-01',null,'4','2001-01-01',null),/*direttore ba*/
('LKNHDD37T45C082I','gianfrancioschio@gmail.com','1990-01-01','gian','francioschio','A','Roma','dei martiri','9','10452','IT',5000,null,'2001-01-01',null,'2','2001-01-01',null),/*direttore ro*/
('YZCLHH46D26E182P','prigioniero@libero.it','1990-01-01','giulia','jail','F','Milano','napoleone','8bis','96857','IT',2000,'MTCMTT98R16G224G','2004-01-01',null,'5','2004-01-01',null),/* magazziniere mi*/
('GYNQKD39A26A745S','fredda.laura@hotmail.com','1990-01-01','laura','fredda','F','Lugano','wurstel','71',null,'SW',1700,'MTCMTT98R16G224G',default,null,'5',default,null),/*farmacista mi*/
('TSWWHP49M70I661Z','aiuto.chenoia@gmail.com','1990-01-01','chenoia','aiuto','M','Bari','cannolo','7','52526','IT',1700,'FCTNBT60A66E625C','2004-01-01',null,'4','2004-01-01',null),/*magazziniere ba*/
('CHBBQT80R45A266E','alessandrino99@libero.it','1990-01-01','alessandro','magno','M','Roma','caduti','101','10452','IT',1500,'LKNHDD37T45C082I','2004-01-01',null,'2','2004-01-01',null),/*magazziniere ro*/
('CDCRHT98E56F058Y','franca.paolini@hotmail.com','1990-01-01','franca','petrella','F','Cagliari','mirto','6T','55555','IT',5000,null,'2001-01-01',null,'3','2001-01-01',null),/*direttore ca*/
('HBBGFR61H17A692E','bassi.maestro@gmail.com','1990-01-01','davide','bassi','M','Pecorinia','pecora','20','55554','IT',1600,'CDCRHT98E56F058Y','2004-01-01',null,'3','2004-01-01',null),/*farmacista ca*/
('WTZZBV34M01F176K','popefrancis@church.com','1990-01-01','francesco ','bergoglio','A','citta del vaticano','piazza san pietro','0',null,'VC',1500,'LKNHDD37T45C082I','2004-01-01',null,'2','2004-01-01',null),/*magazziniere ro*/
('BFNZSR60B45D819Z','spiderman@marvel.com','1990-01-01','peter','parker','M','new cartura','ragno','15',35022,'IT',2500,'FCTNBT60A66E625C','2004-01-01',null,'2','2004-01-01',null),/*farmacista ba*/
('JLHDFB72S49G025O','lovwpljchow@gmail.com','1990-01-01','caso','random','F','uihyf','qwert','678','95421','IT',0036,'CDCRHT98E56F058Y','2020-02-01',null,'3','2020-02-01',null),/*impiegato ca*/
('CCMQMK30S15L890M','giangi.pongi@hotmail.com','1990-01-01','gianluca','pongi','M','arancinia','fritta','4',52522,'IT',2200,'CDCRHT98E56F058Y','2003-01-01','2020-02-01','3','2003-01-01','2020-02-01'),/*farmacista ca*/
('QZLCDH52P11A494T','marioi.rossi@libero.it','1990-01-01','mario','rossi','M','mirtopoli','bicchiere','1','55549','IT',1500,'CDCRHT98E56F058Y',default,null,'3',default,null);/*magazziniere ca*/

insert into Farmacista(CF_farmacista) values
('ZNZDZN42S10E071F'),
('HNTHRZ65S62E048Z'),
('GYNQKD39A26A745S'),
('HBBGFR61H17A692E'),
('BFNZSR60B45D819Z'),
('CCMQMK30S15L890M');

insert into Magazziniere(CF_magazziniere) values
('ZTPCNY52H51E639P'),
('TSWWHP49M70I661Z'),
('WTZZBV34M01F176K'),
('CHBBQT80R45A266E'),
('QZLCDH52P11A494T');

insert into Impiegato(CF_impiegato,is_direttore) values
('MTCMTT98R16G224G','1'),	/*direttore padova e milano*/
('LKNHDD37T45C082I','1'),  	/*direttore roma*/
('CXFCRD88P59B285H','0'),
('FCTNBT60A66E625C','1'),	/*direttore bari*/
('JLHDFB72S49G025O','0'),
('CDCRHT98E56F058Y','1');	/*direttore cagliari*/

insert into Sede(id_sede,citta,via,civico,CAP,stato,telefono,direttore) values
(1,'Padova','piazza delle erbe','1','35020','IT','0499555880','MTCMTT98R16G224G'),
(2,'Roma','colosseo','50','10452','IT','049555506','LKNHDD37T45C082I'),
(3,'Cagliari','lungomare','14','55555','IT','0499555990','CDCRHT98E56F058Y'),
(4,'Bari','piazza arancino','7','52526','IT','0499555762','FCTNBT60A66E625C'),
(5,'Milano','Piazza Duomo','33','00123','IT','0499666885','MTCMTT98R16G224G'),
(6,'Napoli','pizza','7','65982','IT','0490258963','LKNHDD37T45C082I');

insert into Magazzino(id_magazzino) values
(1),		/*Padova*/
(2),		/*Roma*/
(3),		/*Cagliari*/
(4),		/*Bari*/
(5);		/*Milano*/

insert into Prodotto(codice_prodotto,nome,produttore,prezzo_unitario,data_scadenza) values	/*probabilmente va raddoppiata*/
('0000000000','aspirina','bayern',9.9,'2022-10-10'),
('0111111111','moment','big_pharma','11','2022-06-23'),
('2222222222','stampella','stampellers',50,null),
('3333333333','cannabis','pharma_cbd',15,'2022-12-04'),
('4444444444','gaviscon','bayern',12.9,'2023-01-12'),
('5555555555','revinty','novartis',30.5,'2024-05-30'),
('6666666666','ventolin','pfizer',11,'2022-07-04'),/*('6666666666','ventolin','pfizer',11,'2025-03-14'),*/
('7777777777','momendol','big_pharma',14,'2023-02-19'),
('8888888888','occhialoni','luxottica',100,'2050-01-01'),
/*('9999999999'),*/
('1010101010','disinfettante','Johnson&Johnson',21.5,'2022-01-15'),
('1111111111','vaccino_covid','moderna',100,'2023-02-19'),
/*('1212121212'),
('1313131313'),
('1414141414'),*/
('1515151515','lenti_a_contatto','luxottica',21.5,'2022-01-15'),
/*('1616161616'),*/
('1717171717','cerottoni','astrazeneca',5.99,'2024-08-15'),
/*('1818181818'),
('1919191919'),*/
('2020202020','baby_oil','Johnson&Johnson',16.79,'2025-11-16');

insert into Fornitore(p_iva,c_c,pec,citta,via,civico,CAP,stato,telefono) values
('84068046400','111111111111111111111111111','bayern.fornitore@pecbayern.it','Monaco','pharma','6','null','MC','0896352417'),
('98192509845','IT0222222222222222222222222','fornitore@Pharmapec.com','Piacenza','Fiume','13','29010','IT','+390286258'),
('05095055009','IT0333333333333333333333333','luxottica@liberopec.ti','Milano','piazzale_cadorna','3','20123','IT','+390286334'),
('02385200122','IT08R5555555555555555555555','novartis@pec.it','Origgio','Largo_umbero_boccioni','1','21040','IT','0296541'),
('59195191917','OK1787878787878787878778787','pfizer@superpec.it','Roma','Valbondione','113','00188','IT','+3906331821'),
('60451514684','UU0354635464444444444444444','moderna@modpec@us','Cambridge','Tecnhology Square','200','02139','MA','+39800141758'),
('68964365431','IT01M3584763513483545343434','astrazeneca@liberopec.it','Milano','V.le_Decumano','39','20157','IT','0200704500'),
('39569956684','IT02E8786765657690909709544','info@pecstampellers.it','Padova','zoppicante','11','35020','IT','+396666666666'),
('95656589514','IT9123456781234567823456766','info@pecpharmacbd.it','Padova','Via Guizza Conselvana','38a','35020','IT','3409428400'),
('68965468436','UK9869790869769768976877677','Johnson&J@pec.com','Pomezia','Jonny','7j','99999','IT','+390699748520');

insert into TransazioneUscente(timestamp_t,importo,dipendente,direttore_autorizzante) values
/*------STIPENDI_SEDE_DI_CAGLIARI----------------------------*/
('2022-01-03 11:25:06','5000','CDCRHT98E56F058Y','CDCRHT98E56F058Y'),
('2022-02-03 11:25:06','5000','CDCRHT98E56F058Y','CDCRHT98E56F058Y'),
('2022-01-03 23:25:06','1600','HBBGFR61H17A692E','CDCRHT98E56F058Y'),
('2022-02-03 22:25:06','1600','HBBGFR61H17A692E','CDCRHT98E56F058Y'),
('2022-01-03 22:25:06','0036','JLHDFB72S49G025O','CDCRHT98E56F058Y'),
('2022-02-03 12:25:06','0036','JLHDFB72S49G025O','CDCRHT98E56F058Y'),
('2004-01-03 12:25:06','2200','CCMQMK30S15L890M','CDCRHT98E56F058Y'),
('2022-01-03 03:25:06','1500','QZLCDH52P11A494T','CDCRHT98E56F058Y'),
('2022-02-03 02:25:06','1500','QZLCDH52P11A494T','CDCRHT98E56F058Y'),
/*------STIPENDI_SEDE_DI_BARI--------------------------------*/
('2022-01-01 12:25:06','4500','FCTNBT60A66E625C','FCTNBT60A66E625C'),
('2022-02-01 12:25:06','4500','FCTNBT60A66E625C','FCTNBT60A66E625C'),
('2022-01-01 14:15:06','1700','TSWWHP49M70I661Z','FCTNBT60A66E625C'),
('2022-02-01 14:55:06','1700','TSWWHP49M70I661Z','FCTNBT60A66E625C'),
('2022-01-01 16:25:06','2500','BFNZSR60B45D819Z','FCTNBT60A66E625C'),
('2022-02-01 16:25:06','2500','BFNZSR60B45D819Z','FCTNBT60A66E625C'),
/*------ACQUISTI_SEDE_DI_PADOVA------------------------------*/
('2019-01-01 04:05:06','5000',null,'MTCMTT98R16G224G'),
('2020-01-01 05:06:04','2500',null,'MTCMTT98R16G224G'),
('2021-01-01 05:07:03','1700',null,'MTCMTT98R16G224G'),
('2022-03-01 06:08:02','500',null,'MTCMTT98R16G224G'),
('2017-02-01 06:09:01','200',null,'MTCMTT98R16G224G'),
('2020-12-01 04:05:06','1750',null,'MTCMTT98R16G224G'),
/*------ACQUISTI_SEDE_DI_MILANO------------------------------*/
('2019-01-01 04:05:06','5000',null,'MTCMTT98R16G224G'),
('2020-01-01 05:06:04','2500',null,'MTCMTT98R16G224G'),
('2021-01-01 05:07:03','1700',null,'MTCMTT98R16G224G'),
('2022-03-01 06:08:02','500',null,'MTCMTT98R16G224G'),
('2017-02-01 06:09:01','200',null,'MTCMTT98R16G224G'),
('2020-12-01 04:05:06','1750',null,'MTCMTT98R16G224G'),
/*------ACQUISTI_SEDE_DI_ROMA--------------------------------*/
('2019-01-01 04:05:06','5000',null,'LKNHDD37T45C082I'),
('2020-01-01 05:06:04','2500',null,'LKNHDD37T45C082I'),
('2021-01-01 05:07:03','1700',null,'LKNHDD37T45C082I'),
('2022-03-01 06:08:02','500',null,'LKNHDD37T45C082I'),
('2017-02-01 06:09:01','200',null,'LKNHDD37T45C082I'),
('2020-12-01 04:05:06','1750',null,'LKNHDD37T45C082I'),
/*------ACQUISTI_SEDE_DI_CAGLIARI----------------------------*/
('2019-01-01 04:05:06','5000',null,'CDCRHT98E56F058Y'),
('2020-01-01 05:06:04','2500',null,'CDCRHT98E56F058Y'),
('2021-01-01 05:07:03','1700',null,'CDCRHT98E56F058Y'),
('2022-03-01 06:08:02','500',null,'CDCRHT98E56F058Y'),
('2017-02-01 06:09:01','200',null,'CDCRHT98E56F058Y'),
('2020-12-01 04:05:06','1750',null,'CDCRHT98E56F058Y'),
/*------ACQUISTI_SEDE_DI_BARI--------------------------------*/
('2019-01-01 04:05:06','5000',null,'FCTNBT60A66E625C'),
('2020-01-01 05:06:04','2500',null,'FCTNBT60A66E625C'),
('2021-01-01 05:07:03','1700',null,'FCTNBT60A66E625C'),
('2022-03-01 06:08:02','500',null,'FCTNBT60A66E625C'),
('2017-02-01 06:09:01','200',null,'FCTNBT60A66E625C'),
('2020-12-01 04:05:06','1750',null,'FCTNBT60A66E625C');

insert into Lotto(n_lotto,n_pezzi,prodotto,fornitore,transazione) values	% mancano le transazioni  probabilmente va raddoppiata
('0000000000000000',100,'0000000000','84068046400',36),
('1616161616161616',default,'3333333333','95656589514',37),
('0101010101010101',21,'1010101010','02385200122',38),
('8888888888888888',6,'2222222222','39569956684',45),
('1010101010101010',10,'6666666666','59195191917',46),
('6666666666666666',22,'4444444444','84068046400',47),
('6565656565656565',100,'1717171717','68964365431',53),
('94gh9i4uh5guh4ih',24,'2020202020','68965468436',54),
('5125125125125125',100,'0000000000','84068046400',55),
('8927gyhikhbi2hic',24,'2020202020','68965468436',57),
('8963254715256398',200,'1515151515','05095055009',60),
('h986rfouio7t5i79',10,'1111111111','60451514684',62),
('1111111111111111',2,'88888888','05095055009',73),
('897t8gi87yg8u789',10,'6666666666','59195191917',68);

/insert into OperazioneSuMagazzino(magazzino,lotto,magazziniere,data_op,tipo) values	
(1,'0000000000000000','ZTPCNY52H51E639P','2022-06-17','carico'),(1,'1616161616161616','ZTPCNY52H51E639P','2013-06-20','carico'),
(1,'h986rfouio7t5i79','ZTPCNY52H51E639P','2020-06-01','carico'),(2,'0101010101010101','CHBBQT80R45A266E','2019-07-15','carico'),
(2,'1010101010101010','CHBBQT80R45A266E','2013-01-19','carico'),(2,'6666666666666666','WTZZBV34M01F176K','2012-06-11','carico'),
(3,'6565656565656565','QZLCDH52P11A494T','2018-08-14','carico'),(3,'8963254715256398','QZLCDH52P11A494T','2013-03-18','carico'),
(3,'5125125125125125','QZLCDH52P11A494T','2015-07-16','carico'),(3,'8927gyhikhbi2hic','QZLCDH52P11A494T','2019-09-12','scarico'),
(4,'94gh9i4uh5guh4ih','TSWWHP49M70I661Z','2010-01-21','carico'),(4,'1111111111111111','TSWWHP49M70I661Z','2015-09-14','carico'),
(5,'8888888888888888','YZCLHH46D26E182P','2011-02-01','carico'),(5,'897t8gi87yg8u789','YZCLHH46D26E182P','2016-11-11','carico');

/*insert into Contenimento(magazzino,prodotto,quantita) values	
(1,'0000000000','77'),(1,'1111111111','7'),
(1,'3333333333','1'),(2,'6666666666','10'),
(2,'4444444444','15'),(2,'1010101010','19'),
(3,'0000000000','45'),(3,'1717171717','66'),(3,'1515151515','133'),
(4,'2020202020','2'),(4,'8888888888','1'),
(5,'6666666666','9'),(5,'2222222222','6');*/

insert into Farmaco(codice_prodotto,p_attivo,p_fascia,r_necessaria) values	
('3333333333'),
('5555555555'),
('6666666666'),
('1111111111');

insert into Ricevuta(importo,timestamp_r,farmacista) values
('37.2','2020-08-17 04:44:07','ZNZDZN42S10E071F'),
('13.3','2021-04-11 07:51:54','HNTHRZ65S62E048Z'),
('58.6','2020-10-19 18:17:05','GYNQKD39A26A745S'),
('95.1','2020-10-28 18:15:13','CCMQMK30S15L890M'),
('95.4','2022-03-02 09:10:07','HNTHRZ65S62E048Z'),
('56.0','2022-04-08 21:23:48','CCMQMK30S15L890M'),
('06.1','2020-01-05 04:13:30','GYNQKD39A26A745S'),
('76.0','2020-06-18 09:11:01','GYNQKD39A26A745S'),
('39.3','2021-10-22 00:44:13','ZNZDZN42S10E071F'),
('25.5','2021-02-18 16:40:52','CCMQMK30S15L890M'),
('50.6','2020-07-28 15:01:31','HBBGFR61H17A692E'),
('70.5','2022-02-06 11:15:21','BFNZSR60B45D819Z'),
('77.2','2020-07-17 08:27:32','BFNZSR60B45D819Z'),
('72.5','2021-03-25 13:52:07','ZNZDZN42S10E071F'),
('29.2','2021-09-29 01:34:50','CCMQMK30S15L890M'),
('20.7','2020-05-13 10:22:35','BFNZSR60B45D819Z'),
('34.7','2021-04-27 19:58:09','BFNZSR60B45D819Z'),
('09.7','2020-05-04 09:50:14','BFNZSR60B45D819Z'),
('64.7','2021-04-24 05:56:49','GYNQKD39A26A745S'),
('84.1','2021-10-14 04:32:37','ZNZDZN42S10E071F'),
('18.8','2020-11-18 10:42:32','GYNQKD39A26A745S'),
('99.2','2021-10-26 00:33:59','GYNQKD39A26A745S'),
('32.4','2020-02-11 10:55:57','HBBGFR61H17A692E'),
('62.4','2020-02-08 07:01:44','HBBGFR61H17A692E'),
('78.6','2020-09-26 12:58:39','CCMQMK30S15L890M'),
('82.9','2021-01-13 00:48:26','HBBGFR61H17A692E'),
('07.7','2021-11-16 19:21:58','HNTHRZ65S62E048Z'),
('98.3','2021-05-17 03:52:13','BFNZSR60B45D819Z'),
('17.0','2021-08-06 19:50:11','ZNZDZN42S10E071F'),
('76.4','2021-10-31 22:04:21','BFNZSR60B45D819Z'),
('90.6','2021-07-05 12:13:33','CCMQMK30S15L890M'),
('36.9','2020-05-11 06:59:38','BFNZSR60B45D819Z'),
('50.5','2021-04-18 01:20:39','CCMQMK30S15L890M'),
('20.8','2020-01-11 19:29:36','ZNZDZN42S10E071F'),
('64.8','2022-01-08 12:06:29','BFNZSR60B45D819Z'),
('03.1','2021-03-28 19:34:25','HNTHRZ65S62E048Z'),
('57.4','2021-01-10 22:48:39','ZNZDZN42S10E071F'),
('51.9','2020-03-29 17:29:13','CCMQMK30S15L890M'),
('35.1','2021-08-14 04:35:03','HNTHRZ65S62E048Z'),
('56.0','2022-01-29 11:46:22','HNTHRZ65S62E048Z'),
('19.3','2020-04-05 09:37:45','BFNZSR60B45D819Z'),
('72.5','2021-02-12 17:34:12','GYNQKD39A26A745S'),
('49.3','2020-03-10 07:45:35','GYNQKD39A26A745S'),
('60.9','2021-08-26 22:24:57','BFNZSR60B45D819Z'),
('47.3','2021-06-05 23:50:33','BFNZSR60B45D819Z'),
('01.5','2022-03-25 20:10:01','CCMQMK30S15L890M'),
('96.8','2020-03-08 06:54:20','CCMQMK30S15L890M'),
('74.4','2020-05-26 19:23:29','ZNZDZN42S10E071F'),
('69.9','2020-01-14 00:11:52','HBBGFR61H17A692E'),
('08.0','2022-03-04 21:29:28','HNTHRZ65S62E048Z'),
('65.7','2021-03-03 11:05:27','ZNZDZN42S10E071F'),
('83.3','2020-07-24 22:06:30','CCMQMK30S15L890M'),
('26.1','2020-11-21 19:48:09','HNTHRZ65S62E048Z'),
('97.9','2020-01-16 18:46:05','HBBGFR61H17A692E'),
('17.9','2022-05-03 01:11:43','HNTHRZ65S62E048Z'),
('38.1','2021-11-24 04:12:06','BFNZSR60B45D819Z'),
('70.3','2021-04-03 11:20:37','ZNZDZN42S10E071F'),
('14.2','2020-02-10 09:35:36','HNTHRZ65S62E048Z'),
('60.0','2020-08-26 08:39:34','CCMQMK30S15L890M'),
('64.9','2020-04-28 19:52:14','GYNQKD39A26A745S'),
('39.0','2020-10-10 20:27:04','BFNZSR60B45D819Z'),
('16.6','2020-11-28 09:13:52','BFNZSR60B45D819Z'),
('29.5','2020-10-07 19:23:27','HNTHRZ65S62E048Z'),
('27.8','2021-10-18 14:04:39','HBBGFR61H17A692E'),
('95.8','2021-06-05 23:29:32','ZNZDZN42S10E071F'),
('60.5','2020-09-24 20:37:08','HBBGFR61H17A692E'),
('89.8','2021-10-14 11:05:38','HBBGFR61H17A692E'),
('19.1','2020-11-17 08:02:51','CCMQMK30S15L890M'),
('03.4','2021-12-07 06:06:48','HNTHRZ65S62E048Z'),
('37.1','2020-08-13 04:05:58','HNTHRZ65S62E048Z'),
('93.9','2021-09-21 02:17:40','HNTHRZ65S62E048Z'),
('53.4','2022-03-19 03:51:32','GYNQKD39A26A745S'),
('59.4','2022-02-07 04:10:42','CCMQMK30S15L890M'),
('07.8','2021-02-16 06:34:35','ZNZDZN42S10E071F'),
('60.5','2020-05-16 22:38:14','CCMQMK30S15L890M'),
('85.6','2020-05-21 06:08:38','HNTHRZ65S62E048Z'),
('93.0','2020-11-13 11:48:41','HBBGFR61H17A692E'),
('29.5','2021-09-24 01:58:39','CCMQMK30S15L890M'),
('15.5','2020-09-29 10:33:06','GYNQKD39A26A745S'),
('36.6','2021-11-06 21:41:46','HBBGFR61H17A692E'),
('77.7','2020-06-01 15:51:17','BFNZSR60B45D819Z'),
('25.0','2022-01-10 03:14:08','HNTHRZ65S62E048Z'),
('10.1','2021-12-01 23:18:03','BFNZSR60B45D819Z'),
('42.9','2021-07-09 14:49:05','GYNQKD39A26A745S'),
('46.8','2020-11-13 07:04:44','BFNZSR60B45D819Z'),
('70.8','2021-06-05 10:17:19','BFNZSR60B45D819Z'),
('68.7','2021-10-25 22:46:14','BFNZSR60B45D819Z'),
('31.0','2021-11-01 02:38:49','GYNQKD39A26A745S'),
('82.2','2020-03-04 16:10:40','CCMQMK30S15L890M'),
('65.1','2020-12-06 10:42:34','GYNQKD39A26A745S'),
('35.4','2020-10-24 06:49:54','GYNQKD39A26A745S'),
('52.8','2021-09-01 00:09:31','GYNQKD39A26A745S'),
('97.1','2020-07-07 22:48:18','GYNQKD39A26A745S'),
('63.1','2021-04-11 14:53:22','ZNZDZN42S10E071F'),
('82.0','2021-11-28 01:07:13','BFNZSR60B45D819Z'),
('93.1','2022-05-23 06:32:39','HNTHRZ65S62E048Z'),
('13.1','2021-09-09 19:27:02','BFNZSR60B45D819Z'),
('39.0','2020-03-03 04:48:42','HBBGFR61H17A692E'),
('51.0','2021-04-09 03:24:00','GYNQKD39A26A745S'),
('27.9','2020-09-22 00:03:49','HNTHRZ65S62E048Z');

insert into ComposizioneRicevuta(ricevuta,prodotto,quantita) values
(1,'1111111111','5'),
(2,'2222222222','9'),
(3,'3333333333','8'),
(4,'4444444444','5'),
(5,'5555555555','9'),
(6,'6666666666','1'),
(7,'7777777777','9'),
(8,'8888888888','3'),
(9,'9999999999','6'),
(10,'1010101010','9'),
(11,'1111111111','6'),
(12,'1212121212','9'),
(13,'1313131313','9'),
(14,'1414141414','7'),
(15,'1515151515','7'),
(16,'1616161616','3'),
(17,'1717171717','9'),
(18,'1818181818','4'),
(19,'1919191919','6'),
(20,'0000000000','2'),
(21,'1111111111','1'),
(22,'2222222222','6'),
(23,'3333333333','9'),
(24,'4444444444','1'),
(25,'5555555555','4'),
(26,'6666666666','4'),
(27,'7777777777','7'),
(28,'8888888888','1'),
(29,'9999999999','9'),
(30,'1010101010','4'),
(31,'1111111111','7'),
(32,'1212121212','4'),
(33,'1313131313','7'),
(34,'1414141414','1'),
(35,'1515151515','8'),
(36,'1616161616','8'),
(37,'1717171717','5'),
(38,'1818181818','7'),
(39,'1919191919','9'),
(40,'0000000000','9'),
(41,'1111111111','6'),
(42,'2222222222','8'),
(43,'3333333333','9'),
(44,'4444444444','2'),
(45,'5555555555','6'),
(46,'6666666666','1'),
(47,'7777777777','4'),
(48,'8888888888','1'),
(49,'9999999999','3'),
(50,'1010101010','6'),
(51,'1111111111','2'),
(52,'1212121212','3'),
(53,'1313131313','3'),
(54,'1414141414','3'),
(55,'1515151515','8'),
(56,'1616161616','9'),
(57,'1717171717','3'),
(58,'1818181818','1'),
(59,'1919191919','8'),
(60,'0000000000','4'),
(61,'1111111111','7'),
(62,'2222222222','6'),
(63,'3333333333','7'),
(64,'4444444444','9'),
(65,'5555555555','8'),
(66,'6666666666','3'),
(67,'7777777777','1'),
(68,'8888888888','5'),
(69,'9999999999','2'),
(70,'1010101010','7'),
(71,'1111111111','8'),
(72,'1212121212','5'),
(73,'1313131313','4'),
(74,'1414141414','2'),
(75,'1515151515','9'),
(76,'1616161616','4'),
(77,'1717171717','4'),
(78,'1818181818,'8'),
(79,'1919191919','1'),
(80,'0000000000','7'),
(81,'1111111111','3'),
(82,'2222222222','3'),
(83,'3333333333','5'),
(84,'4444444444','7'),
(85,'5555555555','3'),
(86,'6666666666','2'),
(87,'7777777777','1'),
(88,'8888888888','9'),
(89,'9999999999','2'),
(90,'1010101010','3'),
(91,'1111111111','2'),
(92,'1212121212','7'),
(93,'1313131313','2'),
(94,'1414141414','3'),
(95,'1515151515','8'),
(96,'1616161616','8'),
(97,'1717171717','1'),
(98,'1818181818','2'),
(99,'1919191919','5'),
(100,'0000000000','7');

insert into Ricetta(n_ricetta,tipo,data_emissione,CF_medico,CFpaziente,ricevuta)*/
('2569795694903','limitativa','2021-10-10','LXRLNE73A50F623W','CVLPNI29P11H511I'),
('2845359325903','rossa','2020-03-20','ZNZRFL45C26E148H','BCLRMN14T14H489X'),
('7106805166859','limitativa','2020-08-07','SRRGLR94S04L408T','NTLCSN13D02F277P'),
('8394574025005','RP','2021-05-12','RGNMCL30P22C178D','SCRTZN31A09F661D'),
('1600228672912','limitativa','2021-06-26','TRTLCI66S14A370X','CRDTTN64A06G591I'),
('4774377519644','rossa','2021-05-18','CMBNRC97M53M017Z','RSSLCU85R61F681K'),
('4626061472172','RP','2021-05-06','SVRLRA27B17F732Q','BNGNTN59R57E081D'),
('5097020801828','elettronica','2022-03-03','NDRNGN33A07L293C','GLZMCL12D06M102O'),
('5406951685436','a_ricalco','2021-11-28','RFFRLD27H62G746C','CFRCRN03H64L097L'),
('8742830618445','RP','2021-12-26','ZGRGBL84H05L102T','GNSLDN43D65I838C'),
('4581132322599','rossa','2021-11-28','RZZFLP75P46E984K','PGNRMN72T08C006R'),
('6196630299397','NRP','2021-08-14','FOLDC04B66H472G','CRCNCT11B09I653R'),
('0243607890364','NRP','2020-09-27','FRNGML27D56B758K','SPSMCL52B53D068T'),
('6346611921278','elettronica','2020-11-03','CNDTRT02H51F243N','TLSNTL97A03D551C'),
('1980998480345','limitativa','2021-12-26','GLVNZE42H61C064Y','LNCGGL63M64B620U'),
('6090386945099','a_ricalco','2021-12-03','PMTPTR24R43E337E','TRNPLA36L27G921F');


ALTER TABLE Sede 
ADD CONSTRAINT direzione 
FOREIGN KEY (direttore) 
REFERENCES Impiegato(CF_impiegato);

ALTER TABLE Dipendente 
ADD CONSTRAINT afferenza 
FOREIGN KEY (sede) 
REFERENCES Sede(id_sede);

ALTER TABLE Dipendente 
ADD CONSTRAINT assunzione 
FOREIGN KEY (direttore_assunzione) 
REFERENCES Impiegato(CF_impiegato);
/*********************************************************************************************/

/*					CREAZIONE INDICI					*/

/*********************************************************************************************/



/*********************************************************************************************/

/*					     QUERY						*/

/*********************************************************************************************/


